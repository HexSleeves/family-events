{% extends "base.html" %}
{% block title %}{{ event.title }}{% endblock %}
{% block content %}

<div class="bg-white dark:bg-gray-800 rounded-xl p-5 mb-4 shadow-sm">
    <h2 class="text-xl font-bold text-gray-900">{{ event.title }}</h2>
    <div class="text-gray-500 dark:text-gray-400 dark:text-gray-500 text-sm mt-2">
        ğŸ“ {{ event.location_name }}, {{ event.location_city }} Â·
        ğŸ“… {{ event.start_time.strftime("%A, %B %d at %-I:%M %p") }}{% if event.end_time %} - {{ event.end_time.strftime("%-I:%M %p") }}{% endif %} Â·
        ğŸ’µ {{ "Free" if event.is_free else "$" ~ (event.price_min or "?") }} Â·
        <span class="inline-block px-2 py-0.5 rounded-full text-xs font-semibold bg-gray-100 text-gray-700">{{ event.source }}</span>
    </div>
    <p class="mt-3 text-gray-700">{{ event.description[:1000] if event.description else "No description available." }}</p>
    <div class="mt-4 flex gap-2">
        <a href="{{ event.source_url }}" target="_blank" class="inline-block px-4 py-2 rounded-lg bg-indigo-500 hover:bg-indigo-600 text-white font-semibold text-sm transition">View Original</a>
        <button
            id="attend-btn"
            hx-post="/api/attend/{{ event.id }}"
            hx-target="#attend-btn"
            hx-swap="outerHTML"
            hx-indicator="this"
            hx-disabled-elt="this"
            class="inline-flex items-center gap-1 px-4 py-2 rounded-lg bg-emerald-600 hover:bg-emerald-700 text-white font-semibold text-sm cursor-pointer transition disabled:opacity-60 disabled:cursor-wait"
        >
            âœ… Mark Attended
            <span class="htmx-indicator"><span class="spinner"></span></span>
        </button>
    </div>
</div>

{% set tags = event.tags %}
{% include "partials/_tags_grid.html" %}

<div class="bg-white dark:bg-gray-800 rounded-xl p-5 mb-4 shadow-sm">
    <h3 class="font-semibold text-gray-900 mb-3">Raw Data</h3>
    <pre class="bg-gray-900 text-gray-200 p-4 rounded-lg overflow-x-auto text-sm whitespace-pre-wrap">{{ raw_data }}</pre>
</div>

{% endblock %}
